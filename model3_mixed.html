<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Modelo 3 - Mixto (Calendario + Tabla)</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <style>
    body{font-family:Arial;padding:12px;display:flex;gap:20px}
    #left{flex:2} #right{flex:1}
    #calendar{max-width:900px}
    table.dataTable tbody tr.home{background:#fff0f0}
    table.dataTable tbody tr.away{background:#f0fff0}
  </style>
</head>
<body>
  <div id="left">
    <h3>Calendario</h3>
    <div id='calendar'></div>
  </div>
  <div id="right">
    <h3>Pr√≥ximos partidos</h3>
    <table id="upcoming" class="display" style="width:100%"><thead><tr><th>Fecha</th><th>Hora</th><th>Equipo</th><th>Rival</th></tr></thead><tbody></tbody></table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script>
    async function loadMatches(){
      const res = await fetch('matches.json');
      const data = await res.json();
      return data;
    }

    document.addEventListener('DOMContentLoaded', async function(){
      const data = await loadMatches();
      const events = data.map(m=>({title:`${m.team} vs ${m.opponent}`,start:`${m.date}T${m.time}:00`,extendedProps:m}));
      const cal = new FullCalendar.Calendar(document.getElementById('calendar'),{initialView:'dayGridMonth',headerToolbar:{left:'prev,next',center:'title',right:'dayGridMonth,listWeek'},events, eventClick(e){alert(e.event.title)}});
      cal.render();

      const tbody = document.querySelector('#upcoming tbody');
      const sorted = data.slice().sort((a,b)=> (a.date>b.date?1:a.date<b.date?-1:(a.time>b.time?1:-1))).slice(0,12);
      sorted.forEach(m=>{const tr=document.createElement('tr');tr.className=m.homeAway==='Home'?'home':'away';tr.innerHTML=`<td>${m.date}</td><td>${m.time}</td><td>${m.team}</td><td>${m.opponent}</td>`;tbody.appendChild(tr)});
      $('#upcoming').DataTable({paging:false,searching:false,info:false,order:[[0,'asc']]});
    });
  </script>
</body>
</html>